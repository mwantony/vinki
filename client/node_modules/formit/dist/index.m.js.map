{"version":3,"file":"index.m.js","sources":["../lib/utilities/objects.js","../lib/utilities/dom.js","../lib/utilities/id.js","../lib/utilities/elements.js","../lib/renderFormElement.js","../lib/FormElements.js","../lib/renderForm.js"],"sourcesContent":["export const eachProps = (props, callback) => Object.keys(props).forEach(callback);","import { eachProps } from './objects';\n\nexport const isNodeElement = node => {\n  return node && (node instanceof Element || node.nodeType === 1 || node === document);\n};\n\nexport const el = selector => selector && document.createElement(selector);\n\nexport const addClass = (node, className) => {\n  if (!node || !className) return node;\n\n  const classNames = typeof className === 'string' ? className.split(' ') : className;\n\n  if (!classNames) return node;\n\n  classNames.forEach(n => {\n    n && node.classList.add(n);\n  });\n\n  return node;\n};\n\nexport const addPropsToNode = (node, props) => {\n  eachProps(props, key => {\n    const value = props[key];\n    if (key === 'style') {\n      eachProps(value, styleProp => {\n        node.style[styleProp] = value[styleProp];\n      });\n    } else if (key === 'class') {\n      addClass(node, value);\n    } else {\n      node.setAttribute(key, value);\n    }\n  });\n\n  return node;\n};","export const NAMESPACE = 'FormElements';\n\nexport const createFormTokenName = token => `${NAMESPACE}-${token}`;\n\nexport const createFormId = id => createFormTokenName(id);","function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport { el, addClass, addPropsToNode } from './dom';\nimport { createFormTokenName, createFormId } from './id';\n\nexport const createFragment = html => {\n  const fragment = document.createDocumentFragment();\n  const containerNode = el('div');\n  containerNode.innerHTML = html;\n  Array.from(containerNode.childNodes).forEach(n => {\n    fragment.appendChild(n);\n  });\n\n  return fragment;\n};\n\nconst createField = props => {\n  const {\n    fieldClassName,\n    submitClassName,\n    type\n  } = props,\n        rest = _objectWithoutProperties(props, ['fieldClassName', 'submitClassName', 'type']);\n  const nodeType = type.toLowerCase() === 'textarea' ? 'textarea' : 'input';\n  const node = el(nodeType);\n  if (nodeType !== 'textarea') {\n    node.type = type;\n  }\n  const className = type === 'submit' ? submitClassName : fieldClassName;\n\n  addPropsToNode(node, rest);\n  addClass(node, createFormTokenName('Field'));\n  addClass(node, className);\n\n  return node;\n};\n\nexport { createField };\nconst createLabel = (label, props) => {\n  if (!label) return;\n  const node = el('label');\n  const rest = _objectWithoutProperties(props, []);\n  addPropsToNode(node, rest);\n  addClass(node, createFormTokenName('Label'));\n\n  const labelNode = el('div');\n  labelNode.innerHTML = label;\n  addClass(labelNode, createFormTokenName('Label__text'));\n  node.appendChild(labelNode);\n\n  return node;\n};\nexport { createLabel };","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport { isNodeElement, el, addClass, addPropsToNode } from './utilities/dom';\nimport { createFormTokenName, createFormId } from './utilities/id';\nimport { createFragment, createField, createLabel } from './utilities/elements';\n\nconst renderFormElement = (props, index, options = {}, isNested = false) => {\n\n  const {\n    classNames,\n    shouldNestFieldWithinLabel\n  } = options;\n\n  const {\n    fieldGroupClassName,\n    fieldClassName,\n    labelClassName,\n    nestedFieldClassName,\n    nestedGroupClassName,\n    submitClassName\n  } = classNames;\n\n  const node = el('div');\n  addClass(node, createFormTokenName(`FieldGroup`));\n  addClass(node, createFormTokenName(`id-${index}`));\n  addClass(node, fieldGroupClassName);\n\n  if (Array.isArray(props)) {\n    const nodes = props.map((p, i) => renderFormElement(p, `${index}-${i}`, options, true));\n    if (nodes) {\n      nodes.forEach(n => node.appendChild(n));\n    }\n    addClass(node, 'has-fieldGroups');\n    addClass(node, nestedGroupClassName);\n    return node;\n  }\n\n  const { html, label, type } = props,\n        rest = _objectWithoutProperties(props, ['html', 'label', 'type']);\n  const id = createFormId(index);\n  const labelNode = createLabel(label, {\n    class: labelClassName,\n    for: id\n  });\n  const fieldNode = createField(_extends({\n    type,\n    id\n  }, rest, {\n    fieldClassName,\n    submitClassName\n  }));\n\n  if (!labelNode && !fieldNode) return null;\n\n  maybeAddLabel(node, labelNode);\n  maybeAddField(node, labelNode, fieldNode, shouldNestFieldWithinLabel);\n  maybeAddHTML(node, html);\n\n  if (isNested) {\n    addClass(node, nestedFieldClassName);\n    addClass(node, 'is-nested');\n  }\n\n  return node;\n};\n\nconst maybeAddLabel = (node, label) => {\n  if (label) {\n    node.appendChild(label);\n  }\n};\n\nconst maybeAddField = (node, label, field, shouldNest = true) => {\n  if (label && shouldNest) {\n    label.appendChild(field);\n  } else {\n    node.appendChild(field);\n  }\n};\n\nconst maybeAddHTML = (node, html) => {\n  if (html && (typeof html === 'string' || isNodeElement(html))) {\n    const htmlFragment = typeof html === 'string' ? createFragment(html) : html;\n    if (htmlFragment) {\n      node.appendChild(htmlFragment);\n    }\n  }\n};\n\nexport default renderFormElement;","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport renderForm from './renderForm';\n\nconst defaultOptions = {\n  fieldGroupClassName: '',\n  fieldClassName: '',\n  formClassName: '',\n  labelClassName: '',\n  nestedGroupClassName: '',\n  nestedFieldClassName: '',\n  shouldNestFieldWithinLabel: true,\n  submitClassName: '',\n  onWillRender: () => {},\n  onDidRender: () => {}\n};\n\nconst FormElements = (selector = '', elements = [], options = defaultOptions) => {\n  if (!selector) return;\n  const mountNode = document.querySelector(selector);\n  if (!mountNode) return;\n\n  const props = _extends({}, defaultOptions, options);\n  const {\n    fieldGroupClassName,\n    fieldClassName,\n    formClassName,\n    labelClassName,\n    nestedGroupClassName,\n    nestedFieldClassName,\n    submitClassName,\n    onWillRender,\n    onDidRender,\n    shouldNestFieldWithinLabel\n  } = props;\n\n  const classNames = {\n    fieldGroupClassName,\n    fieldClassName,\n    formClassName,\n    labelClassName,\n    nestedGroupClassName,\n    nestedFieldClassName,\n    submitClassName\n  };\n\n  onWillRender(mountNode, { elements, options });\n\n  renderForm(mountNode, elements, { classNames, shouldNestFieldWithinLabel });\n\n  onDidRender(mountNode, { elements, options });\n};\n\nwindow.Formit = FormElements;\n\nexport default FormElements;","import { addClass } from './utilities/dom';\nimport renderFormElement from './renderFormElement';\n\nconst renderForm = (mountNode, els, options) => {\n  if (!mountNode) return;\n\n  if (options && options.classNames) {\n    const { formClassName } = options.classNames;\n    addClass(mountNode, formClassName);\n  }\n\n  els.forEach((prop, index) => {\n    const element = renderFormElement(prop, index, options);\n    mountNode.appendChild(element);\n  });\n};\n\nexport default renderForm;"],"names":["const","eachProps","props","callback","Object","keys","forEach","el","selector","document","createElement","addClass","node","className","classNames","split","n","classList","add","addPropsToNode","key","value","styleProp","style","setAttribute","createFormTokenName","token","NAMESPACE","_objectWithoutProperties","obj","target","i","indexOf","prototype","hasOwnProperty","call","_extends","assign","arguments","length","source","renderFormElement","index","options","isNested","shouldNestFieldWithinLabel","fieldGroupClassName","fieldClassName","labelClassName","nestedFieldClassName","nestedGroupClassName","submitClassName","Array","isArray","nodes","map","p","appendChild","html","label","type","id","createFormId","labelNode","rest","innerHTML","createLabel","class","for","fieldNode","nodeType","toLowerCase","createField","maybeAddLabel","maybeAddField","maybeAddHTML","field","shouldNest","Element","isNodeElement","htmlFragment","fragment","createDocumentFragment","containerNode","from","childNodes","createFragment","defaultOptions","formClassName","onWillRender","onDidRender","FormElements","elements","mountNode","querySelector","els","prop","element","renderForm","window","Formit"],"mappings":"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"}